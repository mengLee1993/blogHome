<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!--
    <script src="../../../base/js/public.js"></script>
    <script src="../../../base/js/docassistant.js"></script>
    <script src="../../../base/js/validate.js"></script>
    <script src="../../../base/js/jquery.cookie.js"></script>
    -->
    <link rel="stylesheet" href="../../../base/css/trade-base.css">
    <script src="../../../base/js/jquery.js"></script>
    <script src="../../../reqConfig.js"></script>
    <!--引入样式文件-->
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/editormd.preview.css" />

    <!--引入js文件-->
    <script src="../js/jquery.min.js"></script>
    <script src="../js/marked.min.js"></script>
    <script src="../js/prettify.min.js"></script>
    <script src="../js/raphael.min.js"></script>
    <script src="../js/underscore.min.js"></script>
    <script src="../js/sequence-diagram.min.js"></script>
    <script src="../js/flowchart.min.js"></script>
    <script src="../js/jquery.flowchart.min.js"></script>
    <script src="../js/editormd.js"></script>
    <style>
        body{
            color: #fff;background: #000;
        }
        .titleBox{
            width: 100%;padding: 20px;
        }
        .titleBox-a{
            color: #fff;float: left;margin-right: 20px;border: 1px solid #fff;padding: 0 5px;border-radius: 5px;
        }
        .containBox{
            width: 100%;
        }
        .containBox-list{
            margin: 20px 0;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="titleBox" id="titleBox">
        <a id="templateRow" class="titleBox-a" href="" style="display: none;"></a>
    </div>
    <div class="containBox">
        <div class="containBox-list" id="templateMd" style="display: none;">
            <div class="eachInitMd">
            </div>
        </div>
    </div>

</body>
<script type="text/javascript">
    var json = [{"name":"JDK安装","htmlUrl":"../md/JDK安装.html","mdUrl":"../md/JDK安装.md"}];
    initHtml(json);
    setTimeout(function(){
        initMd();
    },1);
    function initHtml(data){
        for(var nI = 0; nI < data.length ; nI++ ){
            var jsonItem = data[nI];
            //初始化title
            var templateRowT = $("#templateRow")[0];
            var cloneRowT = templateRowT.cloneNode(true);
            $(cloneRowT).attr("href","#_" + jsonItem.name).html(jsonItem.name);
            cloneRowT.style.display = "";
            templateRowT.parentNode.insertBefore(cloneRowT, templateRowT);


            //初始化md展示
            var templateRow = $("#templateMd")[0];
            var cloneRow = templateRow.cloneNode(true);
            $(cloneRow).attr("id","_" + jsonItem.name);
            $(cloneRow).find("div:first").attr("id",jsonItem.name);
            $(cloneRow).find("#" + jsonItem.name)[0].jsonData = jsonItem;
            $(cloneRow).find("#" + jsonItem.name).load(jsonItem.htmlUrl,function(){});
            cloneRow.style.display = "";
            templateRow.parentNode.insertBefore(cloneRow, templateRow);

        }
    }
    initMd();
    function initMd(){
        $(".eachInitMd").each(function(){
            var str = $(this).attr("id");
            mdToHml(str);

        })
    }
    //markDown转HTMl的方法
    function mdToHml(domId){
        editormd.markdownToHTML(domId, {
            htmlDecode: "style,script,iframe", //可以过滤标签解码
            emoji: true,
            taskList:true,
            tex: true,               // 默认不解析
            flowChart:true,         // 默认不解析
            sequenceDiagram:true,  // 默认不解析
        });
    }
</script>
</html>